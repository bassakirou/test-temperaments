/* empty css               */!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();let questions=[],current=0,scores={sanguine:0,choleric:0,melancholy:0,phlegmatic:0},userResponses=[],currentLanguage="fr",aiConfig=null;async function loadAIConfig(){try{const response=await fetch("./config.js"),configText=await response.text(),configMatch=configText.match(/const\s+AI_CONFIG\s*=\s*({[\s\S]*?});/);configMatch&&(aiConfig=eval("("+configMatch[1]+")"))}catch(error){console.log("Configuration IA non trouv√©e:",error),aiConfig=null}}const translations={fr:{mainTitle:"Test de Personnalit√© : Les 4 Temp√©raments",welcomeText:"Bienvenue ! Ce test ludique te permettra de d√©couvrir ton temp√©rament dominant parmi les 4 types : Sanguin, Col√©rique, M√©lancolique, Flegmatique.",instructionText:"Pour chaque question, r√©ponds de 1 (Pas du tout) √† 5 (Tout √† fait).",startBtn:"Commencer le test",restartBtn:"Refaire le test",aiAnalysisTitle:"Analyse Personnalis√©e par IA",generatingAnalysis:"G√©n√©ration de votre analyse personnalis√©e...",aiEnabled:"ü§ñ <strong>Analyse IA activ√©e</strong> - Vous recevrez une analyse personnalis√©e d√©taill√©e !",aiDisabled:"üìä Analyse IA d√©sactiv√©e - Vous recevrez les r√©sultats de base.",aiNotFound:"‚ö†Ô∏è Configuration IA non trouv√©e - Veuillez configurer config.js pour l'analyse IA.",dominantTemperament:"Votre temp√©rament dominant :",question:"Question",of:"sur",temperaments:{sanguine:"Sanguin",choleric:"Col√©rique",melancholy:"M√©lancolique",phlegmatic:"Flegmatique"}},en:{mainTitle:"Personality Test: The 4 Temperaments",welcomeText:"Welcome! This fun test will help you discover your dominant temperament among the 4 types: Sanguine, Choleric, Melancholic, Phlegmatic.",instructionText:"For each question, answer from 1 (Not at all) to 5 (Completely).",startBtn:"Start the test",restartBtn:"Retake the test",aiAnalysisTitle:"AI Personalized Analysis",generatingAnalysis:"Generating your personalized analysis...",aiEnabled:"ü§ñ <strong>AI Analysis enabled</strong> - You will receive a detailed personalized analysis!",aiDisabled:"üìä AI Analysis disabled - You will receive basic results.",aiNotFound:"‚ö†Ô∏è AI Configuration not found - Please configure config.js for AI analysis.",dominantTemperament:"Your dominant temperament:",question:"Question",of:"of",temperaments:{sanguine:"Sanguine",choleric:"Choleric",melancholy:"Melancholic",phlegmatic:"Phlegmatic"}}},temperamentDescriptions={fr:{sanguine:{name:"Sanguin",emoji:"üòÑ",color:"#ff6b6b",traits:["Extraverti","Optimiste","Sociable","Spontan√©"]},choleric:{name:"Col√©rique",emoji:"üí™",color:"#4ecdc4",traits:["Leader","D√©termin√©","Ambitieux","Direct"]},melancholy:{name:"M√©lancolique",emoji:"ü§î",color:"#45b7d1",traits:["Analytique","Perfectionniste","R√©fl√©chi","Cr√©atif"]},phlegmatic:{name:"Flegmatique",emoji:"üòå",color:"#96ceb4",traits:["Calme","Loyal","Patient","Diplomate"]}},en:{sanguine:{name:"Sanguine",emoji:"üòÑ",color:"#ff6b6b",traits:["Extroverted","Optimistic","Sociable","Spontaneous"]},choleric:{name:"Choleric",emoji:"üí™",color:"#4ecdc4",traits:["Leader","Determined","Ambitious","Direct"]},melancholy:{name:"Melancholic",emoji:"ü§î",color:"#45b7d1",traits:["Analytical","Perfectionist","Thoughtful","Creative"]},phlegmatic:{name:"Phlegmatic",emoji:"üòå",color:"#96ceb4",traits:["Calm","Loyal","Patient","Diplomatic"]}}};function setLanguage(e){currentLanguage=e,document.querySelectorAll(".lang-btn").forEach(e=>e.classList.remove("active")),document.getElementById(`lang-${e}`).classList.add("active"),applyTranslations(),updateMenuLanguageFromPage(),questions.length>0&&loadQuestions()}function applyTranslations(){const e=translations[currentLanguage];document.getElementById("main-title").textContent=e.mainTitle,document.getElementById("welcome-text").textContent=e.welcomeText,document.getElementById("instruction-text").textContent=e.instructionText,document.getElementById("start-btn").textContent=e.startBtn,document.getElementById("restart-btn").textContent=e.restartBtn,document.getElementById("ai-analysis-title").textContent=e.aiAnalysisTitle}async function loadMenu(){try{const e=await fetch("./menu.html"),t=await e.text();document.getElementById("menu-placeholder").innerHTML=t,"function"==typeof initializeMenu&&initializeMenu()}catch(e){console.log("Menu non trouv√©:",e)}}async function loadQuestions(){try{const e=await fetch("./questions.json"),t=await e.json();questions=t[currentLanguage]||t.fr}catch(e){console.error("Erreur lors du chargement des questions:",e)}}async function initApp(){await loadAIConfig(),await loadMenu(),await loadQuestions(),checkAIStatus(),applyTranslations()}function checkAIStatus(){const e=document.getElementById("ai-status"),t=translations[currentLanguage];aiConfig&&aiConfig.apiKey&&""!==aiConfig.apiKey.trim()?(e.innerHTML=t.aiEnabled,e.style.color="#4CAF50"):aiConfig?(e.innerHTML=t.aiDisabled,e.style.color="#FF9800"):(e.innerHTML=t.aiNotFound,e.style.color="#F44336")}function startQuiz(){0!==questions.length?(current=0,scores={sanguine:0,choleric:0,melancholy:0,phlegmatic:0},userResponses=[],document.querySelector(".intro").classList.add("hidden"),document.querySelector(".quiz").classList.remove("hidden"),showQuestion()):alert("Questions non charg√©es")}function showQuestion(){if(current>=questions.length)return void showResult();const e=questions[current];document.getElementById("question-text").textContent=e.text,document.getElementById("progress").textContent=`${translations[currentLanguage].question} ${current+1} ${translations[currentLanguage].of} ${questions.length}`;const t=document.getElementById("scale-buttons");t.innerHTML="";for(let n=1;n<=5;n++){const e=document.createElement("button");e.textContent=n,e.className="scale-btn",e.onclick=()=>selectAnswer(n),t.appendChild(e)}}function selectAnswer(e){const t=questions[current];userResponses.push({question:t.text,answer:e,temperament:t.temperament}),scores[t.temperament]+=e,current++,showQuestion()}function showResult(){document.querySelector(".quiz").classList.add("hidden"),document.querySelector(".result").classList.remove("hidden");const e=Object.keys(scores).reduce((e,t)=>scores[e]>scores[t]?e:t);displayResults(e),aiConfig&&aiConfig.apiKey&&""!==aiConfig.apiKey.trim()&&generateAIAnalysis(e)}function displayResults(e){const t=translations[currentLanguage],n=temperamentDescriptions[currentLanguage];document.getElementById("temperament-title").innerHTML=`${t.dominantTemperament} ${n[e].emoji} ${n[e].name}`;const o=document.getElementById("scores-grid");o.innerHTML="",Object.keys(scores).forEach(e=>{const t=document.createElement("div");t.className="score-card",t.style.borderColor=n[e].color;const s=Math.round(scores[e]/(5*questions.length)*100);t.innerHTML=`\n            <h3 style="color: ${n[e].color};">${n[e].emoji} ${n[e].name}</h3>\n            <div class="score-bar">\n                <div class="score-fill" style="width: ${s}%; background-color: ${n[e].color};"></div>\n            </div>\n            <p>${s}%</p>\n            <div class="traits">\n                ${n[e].traits.map(e=>`<span class="trait">${e}</span>`).join("")}\n            </div>\n        `,o.appendChild(t)})}async function generateAIAnalysis(e){const t=document.getElementById("ai-analysis"),n=document.getElementById("ai-analysis-content"),o=document.getElementById("analysis-loader");t.style.display="block",o.style.display="inline-block",n.innerHTML=translations[currentLanguage].generatingAnalysis;try{const t={dominant_temperament:e,scores:scores,responses:userResponses,language:currentLanguage},o=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${aiConfig.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:aiConfig.model,messages:[{role:"system",content:`Tu es un expert en psychologie des temp√©raments. Analyse les r√©sultats du test et fournis une analyse personnalis√©e en ${"fr"===currentLanguage?"fran√ßais":"anglais"}.`},{role:"user",content:`Voici les r√©sultats du test de temp√©rament : ${JSON.stringify(t)}. Fournis une analyse d√©taill√©e et des conseils personnalis√©s.`}],max_tokens:1e3,temperature:.7})}),s=await o.json();if(!s.choices||!s.choices[0])throw new Error("R√©ponse invalide de l'IA");n.innerHTML=s.choices[0].message.content}catch(s){console.error("Erreur lors de l'analyse IA:",s),n.innerHTML="Erreur lors de la g√©n√©ration de l'analyse IA."}finally{o.style.display="none"}}function restartTest(){document.querySelector(".result").classList.add("hidden"),document.querySelector(".intro").classList.remove("hidden"),current=0,scores={sanguine:0,choleric:0,melancholy:0,phlegmatic:0},userResponses=[]}function updateMenuLanguageFromPage(){"function"==typeof updateMenuLanguage&&updateMenuLanguage(currentLanguage)}window.setLanguage=setLanguage,window.startQuiz=startQuiz,window.restartTest=restartTest,document.addEventListener("DOMContentLoaded",initApp);
